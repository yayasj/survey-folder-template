---
# Baseline expectation suite for household roster data
# This suite checks for common data quality issues in roster datasets

data_asset_type: "pandas"
expectation_suite_name: "roster_suite"

expectations:
  # Structural checks - these must pass or pipeline aborts
  - expectation_type: "expect_table_columns_to_match_ordered_list"
    kwargs:
      column_list:
        - "household_id"
        - "member_id" 
        - "name"
        - "age"
        - "gender"
        - "relationship"
    meta:
      severity: "critical"
      
  - expectation_type: "expect_column_values_to_not_be_null"
    kwargs:
      column: "household_id"
    meta:
      severity: "critical"
      
  - expectation_type: "expect_column_values_to_not_be_null" 
    kwargs:
      column: "member_id"
    meta:
      severity: "critical"

  # Business logic checks - failures create failed row extracts
  - expectation_type: "expect_column_values_to_be_between"
    kwargs:
      column: "age"
      min_value: 0
      max_value: 120
    meta:
      severity: "warning"
      description: "Age should be realistic range"
      
  - expectation_type: "expect_column_values_to_be_in_set"
    kwargs:
      column: "gender"
      value_set: ["Male", "Female", "Other", "Prefer not to say"]
    meta:
      severity: "warning"
      description: "Gender should be from predefined list"
      
  - expectation_type: "expect_column_values_to_be_in_set"
    kwargs:
      column: "relationship"  
      value_set: ["Head", "Spouse", "Child", "Parent", "Sibling", "Other relative", "Non-relative"]
    meta:
      severity: "warning"
      description: "Relationship should be from predefined list"
      
  - expectation_type: "expect_compound_columns_to_be_unique"
    kwargs:
      column_list: ["household_id", "member_id"]
    meta:
      severity: "error"
      description: "Each household member should have unique ID"
      
  - expectation_type: "expect_column_values_to_not_be_null"
    kwargs:
      column: "name"
      mostly: 0.95
    meta:
      severity: "warning" 
      description: "Most members should have names recorded"
